spring:
  application:
    name: cursor-raffle-backend
  
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/cursor_raffle}
    username: ${SPRING_DATASOURCE_USERNAME:postgres}
    password: ${SPRING_DATASOURCE_PASSWORD:1234}
    driver-class-name: org.postgresql.Driver
  
  jpa:
    hibernate:
      ddl-auto: ${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        use_sql_comments: true
  
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  
  security:
    jwt:
      secret: ${SPRING_SECURITY_JWT_SECRET:nMkXfbj5NFeUKZiJhvxQqW9DgTYsrCO0a6HB4GAEm8ol3IRzScuVw1LydP72tp}
      expiration: ${SPRING_SECURITY_JWT_EXPIRATION:86400000}
      refresh-expiration: ${SPRING_SECURITY_JWT_REFRESH_EXPIRATION:604800000}

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  endpoint:
    health:
      show-details: when-authorized
      probes:
        enabled: true
  metrics:
    export:
      prometheus:
        enabled: true
    tags:
      application: ${spring.application.name}

server:
  port: ${SERVER_PORT:8080}
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: on_param
    include-exception: false

logging:
  level:
    root: INFO
    com.cursorraffle: ${LOG_LEVEL:DEBUG}
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

cors:
  allowed-origins: ${CORS_ORIGINS:http://localhost:8081,http://localhost:19000,http://localhost:19001}
  allowed-methods: GET,POST,PUT,PATCH,DELETE,OPTIONS
  allowed-headers: "*"
  allow-credentials: true

app:
  ad:
    min-view-duration: ${APP_AD_MIN_VIEW_DURATION:15}

# Storage Configuration
storage:
  s3:
    # Docker network'te: minio:9000, localhost'ta: localhost:9000
    endpoint: ${STORAGE_S3_ENDPOINT:http://minio:9000}
    access-key: ${STORAGE_S3_ACCESS_KEY:minioadmin}
    secret-key: ${STORAGE_S3_SECRET_KEY:minioadmin123}
    bucket: ${STORAGE_S3_BUCKET:cursor-raffle-ads}
    region: ${STORAGE_S3_REGION:us-east-1}

# CDN Configuration (Optional - MVP i√ßin disabled)
cdn:
  enabled: ${CDN_ENABLED:false}
  provider: ${CDN_PROVIDER:cloudflare}
  cloudflare:
    domain: ${CDN_CLOUDFLARE_DOMAIN:}
    zone-id: ${CDN_CLOUDFLARE_ZONE_ID:}
    api-token: ${CDN_CLOUDFLARE_API_TOKEN:}
  cloudfront:
    domain: ${CDN_CLOUDFRONT_DOMAIN:}
    distribution-id: ${CDN_CLOUDFRONT_DISTRIBUTION_ID:}
    access-key-id: ${CDN_CLOUDFRONT_ACCESS_KEY_ID:}
    secret-access-key: ${CDN_CLOUDFRONT_SECRET_ACCESS_KEY:}

# Google Ads Configuration (Optional - Fallback ads)
google:
  ads:
    enabled: ${GOOGLE_ADS_ENABLED:false}
  admob:
    app-id: ${GOOGLE_ADMOB_APP_ID:}
    ad-unit-id-interstitial: ${GOOGLE_ADMOB_AD_UNIT_ID_INTERSTITIAL:}
    ad-unit-id-rewarded: ${GOOGLE_ADMOB_AD_UNIT_ID_REWARDED:}